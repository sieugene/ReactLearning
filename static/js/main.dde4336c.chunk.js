(this.webpackJsonpReactLearning=this.webpackJsonpReactLearning||[]).push([[0],{125:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"h",(function(){return m})),a.d(t,"g",(function(){return g})),a.d(t,"d",(function(){return E})),a.d(t,"e",(function(){return v})),a.d(t,"f",(function(){return _})),a.d(t,"i",(function(){return N})),a.d(t,"c",(function(){return T}));var n=a(6),r=a.n(n),s=a(13),o=a(137),l=a(7),i=a(9),c={UsersList:[],pageSize:15,totalUsers:0,currentPage:1,searchTerm:"",isFetching:!1,followingInProgress:[]},u=function(e){return{type:"FOLLOW",userId:e}},m=function(e){return{type:"UNFOLLOW",userId:e}},d=function(e){return{type:"SET_USERS",UsersList:e}},p=function(e){return{type:"SET_USERS_TOTAL_COUNT",totalUsers:e}},h=function(e){return{type:"SET_SEARCH_TERM",text:e}},f=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},g=function(e,t){return{type:"TOGGLE_FOLLOWING_PROGRESS",isFetching:e,userId:t}},E=function(e,t){return function(){var a=Object(s.a)(r.a.mark((function a(n){var s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(f(!0)),a.next=3,i.d.getUsers(e,t);case 3:s=a.sent,n(f(!1)),n(d(s.items)),n(p(s.totalCount));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},v=function(e,t){return function(){var a=Object(s.a)(r.a.mark((function a(n){var s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(f(!0)),n({type:"SET_CURRENT_PAGE",currentPage:t}),a.next=4,i.d.getUsers(e,t);case 4:s=a.sent,n(f(!1)),n(d(s.items)),n(p(s.totalCount));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},_=function(e,t){return function(){var a=Object(s.a)(r.a.mark((function a(n){var s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(f(!0)),n(h(t)),t||(t=" "),a.next=5,i.d.getUsersTerm(e,t);case 5:s=a.sent,n(f(!1)),n(d(s.items)),n(p(s.totalCount));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},b=function(){var e=Object(s.a)(r.a.mark((function e(t,a,n,s){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(g(!0,a)),e.next=3,n(a);case 3:t(s(a)),t(g(!1,a));case 5:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),N=function(e){return function(t){return b(t,e,i.b.unfollowUser,m)}},T=function(e){return function(t){return b(t,e,i.b.followUser,u)}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(l.a)({},e,{UsersList:e.UsersList.map((function(e){return e.id===t.userId?Object(l.a)({},e,{followed:!0}):e}))});case"UNFOLLOW":return Object(l.a)({},e,{UsersList:e.UsersList.map((function(e){return e.id===t.userId?Object(l.a)({},e,{followed:!1}):e}))});case"SET_USERS":return Object(l.a)({},e,{UsersList:t.UsersList});case"SET_CURRENT_PAGE":return Object(l.a)({},e,{currentPage:t.currentPage});case"SET_USERS_TOTAL_COUNT":return Object(l.a)({},e,{totalUsers:t.totalUsers});case"SET_SEARCH_TERM":return Object(l.a)({},e,{searchTerm:t.text});case"TOGGLE_IS_FETCHING":return Object(l.a)({},e,{isFetching:t.isFetching});case"TOGGLE_FOLLOWING_PROGRESS":return Object(l.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(o.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}}},129:function(e,t,a){e.exports=a.p+"static/media/preloader.03527c20.svg"},134:function(e,t,a){},135:function(e,t,a){e.exports={error_window:"GlobalErrors_error_window__AJulT"}},163:function(e,t,a){e.exports=a(292)},168:function(e,t,a){},22:function(e,t,a){e.exports={containerDialog:"Dialogs_containerDialog__3Vbal",listDialogs:"Dialogs_listDialogs__19fS5",dialogUser:"Dialogs_dialogUser__22E2c",userNameWithImg:"Dialogs_userNameWithImg__MjVFY",messagesContain:"Dialogs_messagesContain__OC50C",NotViews:"Dialogs_NotViews__1RKFo",messagesWithFriendId:"Dialogs_messagesWithFriendId__93Jwe",dialog:"Dialogs_dialog__3kBaR",notViewedMessage:"Dialogs_notViewedMessage__1_mXW",main__img__username:"Dialogs_main__img__username__35j4I",dateAdded:"Dialogs_dateAdded__15bT1",chatText:"Dialogs_chatText__2f55I",mainChatBlock:"Dialogs_mainChatBlock__1iniB",chatTittle:"Dialogs_chatTittle__10pAG",chatBody:"Dialogs_chatBody__QIwhv",past__messages:"Dialogs_past__messages__2mXG7"}},29:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(129),o=a.n(s),l=a(89),i=a.n(l);t.a=function(e){return r.a.createElement("div",{className:i.a.preloadContain},r.a.createElement("img",{src:o.a,className:i.a.preloader,alt:""}))}},292:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(66),o=a.n(s),l=(a(168),a(25)),i=a(26),c=a(27),u=a(28),m=(a(95),a(18)),d=a(51),p=a(29),h=a(30),f=a.n(h),g=a(126),E=a(127),v=a(73),_=a(32),b=a.n(_),N=function(e){var t=e.input,a=e.meta,n=Object(v.a)(e,["input","meta"]),s=a.touched&&a.error?b.a.error:" ";return r.a.createElement("div",{className:b.a.FormControl},r.a.createElement("div",{className:s},r.a.createElement("input",Object.assign({},t,n)),r.a.createElement("br",null),a.touched&&a.error&&r.a.createElement("span",null,a.error)))},T=function(e){var t=e.input,a=e.meta,n=Object(v.a)(e,["input","meta"]),s=a.touched&&a.error?b.a.error:" ";return r.a.createElement("div",{className:b.a.FormControl},r.a.createElement("div",{className:s},r.a.createElement("input",Object.assign({},t,n)),r.a.createElement("br",null),a.touched&&a.error&&r.a.createElement("span",null,a.error)))},S=function(e){var t=e.contactTitle,a=e.contactBody;return r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("b",null,t,": "),r.a.createElement("p",null,r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},a))),r.a.createElement(g.a,{placeholder:"https://www.".concat(t,".com"),name:"contacts.".concat(t),component:N}))},O=Object(E.a)({form:"editProfile"})((function(e){return r.a.createElement("div",{className:f.a.infoProfile},r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("button",{className:"waves-effect waves-light btn-small indigo darken-4 mb10"},"Save"),e.error&&r.a.createElement("div",{className:f.a.someError},e.error),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("b",null,"About me:")),r.a.createElement(g.a,{placeholder:"About me",name:"aboutMe",component:N}),r.a.createElement("span",null,r.a.createElement("b",null,"Full name: ")),r.a.createElement(g.a,{placeholder:"Full Name",name:"fullName",component:N}),r.a.createElement("span",null,r.a.createElement("b",null,"Seek work: ")),r.a.createElement(g.a,{placeholder:"Looking for a job",type:"checkbox",name:"lookingForAJob",component:N}),r.a.createElement("span",null,r.a.createElement("b",null,"Description of the search: ")),r.a.createElement(g.a,{placeholder:"Looking for a job desc",name:"lookingForAJobDescription",component:N}),Object.keys(e.profile.contacts).map((function(e){return r.a.createElement(S,{key:e,contactTitle:e,contactBody:""})}))))})),k=a(36),w=a.n(k),C=r.a.memo((function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),s=a[0],o=a[1],l=Object(n.useState)(e.status),i=Object(d.a)(l,2),c=i[0],u=i[1],m=function(){o(!0)},p=function(){o(!1),e.updateStatusUserThunk(e.id,c)},h=function(e){u(e.currentTarget.value)};Object(n.useEffect)((function(){u(e.status)}),[e.status]);return r.a.createElement("div",null,Number(e.urlMatchParams)===e.id?s?r.a.createElement("input",{onChange:h,autoFocus:!0,onBlur:p,value:c}):r.a.createElement("span",{onDoubleClick:m,"data-tooltip":"double click to change"},e.status?e.status:r.a.createElement("div",null,"_____")):r.a.createElement("div",null,e.status?e.status:r.a.createElement("div",null,"_____")))})),j=function(e){var t=e.contactTitle,a=e.contactBody;return r.a.createElement("div",null,!!a&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6"},r.a.createElement("b",null,t,": ")),r.a.createElement("div",{className:"col s6 right-align"},r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},a))))},I=function(e){return r.a.createElement("div",{className:f.a.infoProfile},r.a.createElement("div",{className:f.a.editButton},e.id===Number(e.urlMatchParams)&&r.a.createElement("p",{className:"waves-effect waves-light btn-small indigo lighten-4 black-text mb10",onClick:function(){e.setEditProfile(!0)}},"Edit")),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6"},r.a.createElement("b",null,"About me: ")),r.a.createElement("div",{className:"col s6 right-align"},r.a.createElement("p",null,e.profile.aboutMe))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6"},r.a.createElement("b",null,"Full name: ")),r.a.createElement("div",{className:"col s6 right-align"},r.a.createElement("p",null,e.profile.fullName))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6"},r.a.createElement("b",null,"Status:")),r.a.createElement("div",{className:"col s6 right-align"},r.a.createElement("p",null,e.status))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6"},r.a.createElement("b",null,"Seek work: ")),r.a.createElement("div",{className:"col s6 right-align"},r.a.createElement("p",null,e.profile.lookingForAJob?"yes":"no"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6"},r.a.createElement("b",null,"Description of the search: ")),r.a.createElement("div",{className:"col s6 right-align"},r.a.createElement("p",null,e.profile.lookingForAJobDescription))),Object.keys(e.profile.contacts).map((function(t){return r.a.createElement(j,{key:t,contactTitle:t,contactBody:e.profile.contacts[t]})})))},U=r.a.memo((function(e){if(!e.profile)return r.a.createElement(p.a,null);var t=Object(n.useState)(!1),a=Object(d.a)(t,2),s=a[0],o=a[1];return r.a.createElement("div",{className:f.a.profileContain},e.loading?r.a.createElement(p.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row profile"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:f.a.avatarBlock},r.a.createElement("img",{src:e.profile.photos.small?e.profile.photos.large:w.a,alt:""}),e.id===Number(e.urlMatchParams)&&r.a.createElement("div",null,r.a.createElement("input",{type:"file",name:"myFile",id:"myFile",onChange:function(t){t.target.files.length&&e.uploadNewPhotoThunk(t.target.files[0])}}),r.a.createElement("label",{htmlFor:"myFile",className:f.a.uploadPhoto,"data-tooltip":"click to upload a photo"}," ")))),r.a.createElement("div",{className:"col s6"},r.a.createElement("h5",null,e.profile.fullName),r.a.createElement(C,{status:e.status,updateStatusUserThunk:e.updateStatusUserThunk,id:e.id,urlMatchParams:e.urlMatchParams}))),r.a.createElement("div",{className:"row profile"},r.a.createElement("div",{className:"col s12"},s?r.a.createElement(O,{initialValues:e.profile,onSubmit:function(t){t===e.profile?o(!1):e.updateProfileUserThunk(t).then((function(){o(!1)}))},profile:e.profile}):r.a.createElement(I,{profile:e.profile,status:e.status,updateStatusUserThunk:e.updateStatusUserThunk,id:e.id,urlMatchParams:e.urlMatchParams,setEditProfile:o})))))})),P=a(12),y=a(6),D=a.n(y),A=a(13),F=a(7),M=a(9),L=a(35),x={profile:null,status:"",loading:!1},W=function(e){return{type:"SET_USER_PROFILE",profile:e}},R=function(e){return{type:"SET_STATUS",status:e}},G=function(e){return{type:"SET_NEW_PHOTO",photos:e}},B=function(e){return{type:"SET_SUCCESS_LOADING",loading:e}},H=function(e){return function(t){e&&M.c.getProfile(e).then((function(e){t(W(e.data))}))}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_PROFILE":return Object(F.a)({},e,{profile:t.profile});case"SET_STATUS":return Object(F.a)({},e,{status:t.status});case"SET_NEW_PHOTO":return Object(F.a)({},e,{profile:Object(F.a)({},e.profile,{photos:t.photos})});case"SET_SUCCESS_LOADING":return Object(F.a)({},e,{loading:t.loading});default:return e}},V=a(5),J=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"updateProfile",value:function(e){this.props.getProfileThunk(e),this.props.setStatusUserThunk(e)}},{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;this.updateProfile(e)}},{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.userId!==e.match.params.userId&&this.updateProfile(this.props.match.params.userId)}},{key:"render",value:function(){if(!this.props.match.params.userId){if(this.props.id){var e="/profile/".concat(this.props.id);return r.a.createElement(m.a,{to:e})}return r.a.createElement(m.a,{to:"/login"})}return r.a.createElement(U,{profile:this.props.profile,status:this.props.status,updateStatusUserThunk:this.props.updateStatusUserThunk,id:this.props.id,urlMatchParams:this.props.match.params.userId,updateProfileUserThunk:this.props.updateProfileUserThunk,uploadNewPhotoThunk:this.props.uploadNewPhotoThunk,loading:this.props.loading})}}]),a}(r.a.Component),X=Object(V.d)(Object(P.b)((function(e){return{profile:e.profilePage.profile,id:e.Auth.id,status:e.profilePage.status,loading:e.profilePage.loading}}),{setUser:W,getProfileThunk:H,setStatusUserThunk:function(e){return function(t){e&&M.c.getStatus(e).then((function(e){t(R(e.data))}))}},updateStatusUserThunk:function(e,t){return function(a){M.c.getStatus(e).then((function(e){a(R(e.data)),t?e.data!==t&&(a(B(!0)),M.c.updateStatus(t).then((function(e){0===e.data.resultCode&&(a(R(t)),a(B(!1)))}))):alert("field empty")}))}},updateProfileUserThunk:function(e){return function(t,a){return M.c.updateProfile(e).then((function(e){if(0!==e.data.resultCode){var n=e.data.messages.length>0?e.data.messages[0]:"Some error";return t(Object(L.a)("editProfile",{_error:n})),Promise.reject(e.data.messages[0])}var r=a().Auth.id;t(H(r))}))}},uploadNewPhotoThunk:function(e){return function(){var t=Object(A.a)(D.a.mark((function t(a){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(B(!0)),t.next=3,M.c.uploadPhoto(e);case 3:n=t.sent,a(B(!1)),0===n.data.resultCode&&a(G(n.data.data.photos));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),m.f)(J),Y=a(11),Z=a(42),q=a.n(Z),K=a(39),Q=a.n(K),$=function(e){return r.a.createElement("div",{className:Q.a.sidebar},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(Y.b,{to:"/profile/",activeClassName:Q.a.active}," Profile "),r.a.createElement("br",null)),r.a.createElement("li",null,r.a.createElement(Y.b,{to:"/Dialogs",activeClassName:Q.a.active}," Dialogs "),r.a.createElement("br",null)),r.a.createElement("li",null,r.a.createElement(Y.b,{to:"/Users",activeClassName:Q.a.active}," Users "),r.a.createElement("br",null)),r.a.createElement("li",null,r.a.createElement("button",{onClick:e.logoutThunk,className:Q.a.loginButton},"Log out"))))},ee=function(e){var t=e.toggle?" active":"";return r.a.createElement("div",{className:"container blockDrop"},r.a.createElement("div",{className:"dropdownMenu"+t},r.a.createElement($,{logoutThunk:e.logoutThunk})))},te=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"grey darken-4"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("div",{className:"container"},r.a.createElement("ul",{className:"right "+q.a.cursor,onClick:function(){e.dropDownToogle()}},e.isAuth?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("h5",null,e.login)),r.a.createElement("p",{to:"/profile",className:q.a.userlink},r.a.createElement("li",{className:"btn-floating btn-large waves-effect waves-light grey darken-4"},e.userPhoto?r.a.createElement("img",{src:e.userPhoto.small,alt:"",className:q.a.userPhoto})||r.a.createElement("img",{src:e.userPhoto.large,alt:"",className:q.a.userPhoto}):r.a.createElement("img",{src:w.a,alt:"",className:q.a.userPhoto}))),r.a.createElement("li",null,r.a.createElement("i",{className:"small material-icons"},"expand_more"))):r.a.createElement("button",{className:q.a.loginButton},r.a.createElement(Y.b,{to:"/login/"},"Login")))))),e.isAuth&&r.a.createElement(ee,{logoutThunk:e.logoutThunk,toggle:e.toggle}))},ae={id:null,login:null,email:null,isAuth:!1,captcha:null,loading:!1},ne=function(e,t,a,n){return{type:"SET_AUTH_USER",data:{id:e,login:t,email:a,isAuth:n}}},re=function(e){return{type:"TOOGLE_LOADING",loading:e}},se=function(){return function(e){return e(re(!0)),M.e.me().then((function(t){if(0===t.data.resultCode){var a=t.data.data,n=a.id,r=a.login,s=a.email;e(ne(n,r,s,!0)),e(re(!1))}else e(re(!1))}))}},oe=function(){return function(){var e=Object(A.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(re(!0)),e.next=3,M.f.getCaptcha();case 3:a=e.sent,t({type:"SET_SUCCESS_CAPTCHA",data:{captcha:a.data.url}}),t(re(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTH_USER":case"SET_SUCCESS_CAPTCHA":return Object(F.a)({},e,{},t.data);case"TOOGLE_LOADING":return Object(F.a)({},e,{loading:t.loading});default:return e}},ie={initialized:!1,userPhoto:null},ce=function(e){return{type:"INITIALIZED_USER_PHOTO",userPhoto:e}},ue=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={toggle:!1},n}return Object(i.a)(a,[{key:"dropDownToogle",value:function(){this.setState({toggle:!this.state.toggle})}},{key:"componentDidMount",value:function(){this.props.initiliazedUserPhotoThunk(this.props.id)}},{key:"componentDidUpdate",value:function(e,t,a){e.id!==this.props.id&&(null===this.props.id||this.props.initiliazedUserPhotoThunk(this.props.id)),e.location.pathname!==this.props.location.pathname&&this.setState({toggle:!1})}},{key:"render",value:function(){return r.a.createElement(te,Object.assign({},this.props,{userPhoto:this.props.userPhoto,dropDownToogle:this.dropDownToogle.bind(this),toggle:this.state.toggle}))}}]),a}(r.a.Component),me=Object(V.d)(Object(P.b)((function(e){return{isAuth:e.Auth.isAuth,login:e.Auth.login,id:e.Auth.id,userPhoto:e.app.userPhoto}}),{logoutThunk:function(){return function(e){e(re(!0)),M.e.logout().then((function(t){0===t.data.resultCode?(e(ne(null,null,null,!1)),e(re(!1))):e(re(!1))}))}},initiliazedUserPhotoThunk:function(e){return function(){var t=Object(A.a)(D.a.mark((function t(a){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}t.next=7;break;case 3:return t.next=5,M.c.getProfile(e);case 5:n=t.sent,a(ce(n.data.photos));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),m.f)(ue),de=function(e){if(!e)return"Some errors"},pe=Object(E.a)({form:"login"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(g.a,{placeholder:"Email",validate:[de],name:"email",component:T})),r.a.createElement("div",null,r.a.createElement(g.a,{placeholder:"Password",validate:[de],name:"password",type:"Password",component:T})),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement(g.a,{name:"rememberMe",component:"input",type:"Checkbox"}),r.a.createElement("span",null,"Remember Me")))),e.error&&r.a.createElement("div",{className:b.a.someError},e.error),e.captcha&&r.a.createElement("div",null,r.a.createElement("img",{src:e.captcha,alt:""})),e.captcha&&r.a.createElement("div",null,r.a.createElement(g.a,{placeholder:"enter symbols",name:"captcha",component:"input",validate:[de]})),r.a.createElement("button",{className:"waves-effect waves-light btn-small mr10"},"Login"),r.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank",className:"waves-effect waves-light btn-small  deep-purple lighten-1",rel:"noopener noreferrer"},"Go to API"))})),he=function(e){return e.isAuth?r.a.createElement(m.a,{to:"/profile"}):r.a.createElement("div",null,e.loading&&r.a.createElement(p.a,null),r.a.createElement("div",{className:"authBlock"},r.a.createElement("h3",null,"Login"),r.a.createElement(pe,{onSubmit:function(t){e.loginThunk(t.email,t.password,t.rememberMe,t.captcha)},captcha:e.captcha}),r.a.createElement("h3",null,"Use to log in:"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("h5",null,"Email: free@samuraijs.com")),r.a.createElement("li",null,r.a.createElement("h5",null,"Password: free"))),r.a.createElement("h5",null,"If authorization does not work, do it",r.a.createElement("a",{href:"https://social-network.samuraijs.com/login",target:"_blank",rel:"noopener noreferrer"}," here"))))},fe=Object(P.b)((function(e){return{isAuth:e.Auth.isAuth,captcha:e.Auth.captcha,loading:e.Auth.loading}}),{loginThunk:function(e,t,a,n){return function(r){r(re(!0)),M.e.login(e,t,a,n).then((function(e){if(0===e.data.resultCode)r(se()),r(re(!1));else{10===e.data.resultCode&&(r(oe()),r(re(!1)));var t=e.data.messages.length>0?e.data.messages[0]:"Some error";r(Object(L.a)("login",{_error:t})),r(re(!1))}}))}},getCaptchaThunk:oe})(he),ge=function(e){return r.a.createElement("div",{className:Q.a.sidebar})},Ee=function(e){var t=e.dialog.lastDialogActivityDate,a=t.substr(0,t.length-12);return r.a.createElement("div",{className:"dialog"},r.a.createElement(Y.b,{to:"/messages/".concat(e.dialog.id),className:"black-text"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col xl1 l1 m2 s3"},r.a.createElement("div",null,e.dialog.photos.small&&e.dialog.photos.large?r.a.createElement("img",{src:e.dialog.photos.small,alt:""})||r.a.createElement("img",{src:e.dialog.photos.large,alt:""}):r.a.createElement("img",{src:w.a,alt:""}))),r.a.createElement("div",{className:"col xl11 l11 m10 s9"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6 left-align"},r.a.createElement("h5",null,e.dialog.userName)),r.a.createElement("div",{className:"col s6 right-align"},r.a.createElement("p",{className:"activity"},a,r.a.createElement("br",null)),e.dialog.newMessagesCount<=0?"":r.a.createElement("p",{className:"newMessage"},r.a.createElement("span",null,e.dialog.newMessagesCount))))))))},ve=function(e){return e.loading?r.a.createElement(p.a,null):r.a.createElement("div",null,r.a.createElement("div",null,0===e.listDialogs.length?r.a.createElement("div",null,"No dialogs"):e.listDialogs.map((function(e){return r.a.createElement(Ee,{dialog:e,key:e.id})}))))},_e={listDialogs:[],messagesWithFriend:{items:[],totalCount:null},countNesMessages:null,currentUserInChat:[],loading:!1},be=function(e,t){return{type:"SET_MESSAGES_WITH_FRIEND",messages:e,totalCount:t}},Ne=function(e){return{type:"SET_SUCCESS_LOADING",loading:e}},Te=function(e){return function(){var t=Object(A.a)(D.a.mark((function t(a){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.a.getListMessagesWithFriend(e);case 2:return n=t.sent,a(be(n.data.items,n.data.totalCount)),t.next=6,M.c.getProfile(e);case 6:n=t.sent,a({type:"SET_CURRENT_USER_IN_CHAT",profile:n.data}),Promise.all([n]).then((function(e){a(Ne(!1))}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Se=function(e){return function(t){M.a.getListMessagesWithFriend(e).then((function(e){t(be(e.data.items,e.data.totalCount))})),console.log("sync: User:",e)}},Oe=function(e,t){return function(){var a=Object(A.a)(D.a.mark((function a(n){return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,M.a.sendMessageToFriend(e,t);case 2:n(Te(e));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ALL_DIALOGS":return Object(F.a)({},e,{},e.listDialogs,{listDialogs:t.allDialogs});case"SET_MESSAGES_WITH_FRIEND":return Object(F.a)({},e,{messagesWithFriend:Object(F.a)({},e.messagesWithFriend,{items:t.messages,totalCount:t.totalCount})});case"SET_COUNT_NEW_MESSAGES":return Object(F.a)({},e,{countNesMessages:t.countNesMessages});case"SET_CURRENT_USER_IN_CHAT":return Object(F.a)({},e,{currentUserInChat:t.profile});case"SET_SUCCESS_LOADING":return Object(F.a)({},e,{loading:t.loading});default:return e}},we=Object(V.d)(m.f,Object(P.b)((function(e){return{listDialogs:e.dialogs.listDialogs,messagesWithFriend:e.dialogs.messagesWithFriend,countNesMessages:e.dialogs.countNesMessages,id:e.Auth.id,loading:e.dialogs.loading}}),{startChattingThunk:function(e){return function(){var t=Object(A.a)(D.a.mark((function t(a){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.a.startChatting(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getAllDialogsThunk:function(){return function(){var e=Object(A.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ne(!0)),e.next=3,M.a.getAllDialogs();case 3:a=e.sent,t(Ne(!1)),t({type:"SET_ALL_DIALOGS",allDialogs:a.data});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getListMessagesWithFriendThunk:Te,sendMessageToFriendThunk:Oe,getListNewMessagesThunk:function(e){return function(){var e=Object(A.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.listNewMessage();case 2:a=e.sent,t({type:"SET_COUNT_NEW_MESSAGES",countNesMessages:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))((function(e){return Object(n.useEffect)((function(){e.getAllDialogsThunk()}),[]),e.id?r.a.createElement(ve,e):r.a.createElement(m.a,{to:"/login"})})),Ce=a(22),je=a.n(Ce),Ie=a(134),Ue=a.n(Ie),Pe=Object(E.a)({form:"Message"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit,className:Ue.a.container},r.a.createElement("div",{className:"row p10"},r.a.createElement("div",{className:"col xl11 m10 l10 s10"},r.a.createElement(g.a,{name:"newMessage",placeholder:"Write a message",component:"textarea",className:"materialize-textarea"})),r.a.createElement("div",{className:"col xl1 m2 l2 s2 center-align"},r.a.createElement("button",{className:"btn-Medium transparent sendMessage pt25"},r.a.createElement("i",{className:"Medium material-icons black-text"},"send")))))})),ye=function(e){var t=e.match.params.userId,a=/[^\d:]/g,n=0===e.currentUserInChat.length?"":e.currentUserInChat.photos.large&&e.currentUserInChat.photos.small?r.a.createElement("img",{src:e.currentUserInChat.photos.large,alt:""}):r.a.createElement("img",{src:w.a,alt:""}),s=e.authUserPhoto?r.a.createElement("img",{src:e.authUserPhoto.small,alt:""})||r.a.createElement("img",{src:e.authUserPhoto.large,alt:""}):" ";return r.a.createElement("div",{className:"message__main container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("div",{className:je.a.messagesContain},0===e.currentUserInChat.length?"":r.a.createElement("div",{className:je.a.chatTittle},r.a.createElement("h3",{className:"left-align"},r.a.createElement(Y.b,{to:"/Dialogs"},"Back")),r.a.createElement("h3",{className:"center-align"},e.currentUserInChat.fullName),r.a.createElement(Y.b,{to:"/profile/"+t},n)),r.a.createElement("div",{className:je.a.mainChatBlock},r.a.createElement("div",{className:je.a.chatBody},e.messagesWithFriend.items.length>=10&&r.a.createElement("button",{className:je.a.past__messages,onClick:function(){e.getReturnMessageDateThunk(e.currentUserInChat.userId,"2020.01.01")}},"Past messages"),0===e.messagesWithFriend.items.length?"You don't have messages with this user":e.messagesWithFriend.items.map((function(e){return r.a.createElement("div",{key:e.id,className:!0===e.viewed?je.a.messagesWithFriendId:je.a.notViewedMessage},r.a.createElement("div",{className:je.a.main__img__username},e.senderId===t?n:s,r.a.createElement("h4",null,e.senderName),r.a.createElement("div",{className:je.a.dateAdded},function(e){var t=e.substr(e.length-12).replace(a,"");return t.split(":")[0]+":"+t.split(":")[1]}(e.addedAt))),r.a.createElement("div",{className:je.a.chatText},e.body))})))),r.a.createElement(Pe,{onSubmit:function(a){e.sendMessageToFriendThunk(t,a.newMessage)}})))))},De=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={load:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.getListMessagesWithFriendThunk(this.props.match.params.userId)}},{key:"componentDidUpdate",value:function(e){this.props.ClearIntreval(),e.match.params.userId!==this.props.match.params.userId?(this.props.getListMessagesWithFriendThunk(this.props.match.params.userId),this.props.ClearIntreval()):e.match.params.userId===this.props.match.params.userId&&this.props.SyncInterval(this.props.match.params.userId)}},{key:"render",value:function(){return this.props.id?r.a.createElement(ye,this.props):r.a.createElement(m.a,{to:"/login"})}}]),a}(r.a.Component),Ae=Object(V.d)(m.f,Object(P.b)((function(e){return{messagesWithFriend:e.dialogs.messagesWithFriend,listDialogs:e.dialogs.listDialogs,currentUserInChat:e.dialogs.currentUserInChat,authUserPhoto:e.app.userPhoto,id:e.Auth.id}}),{getListMessagesWithFriendThunk:Te,sendMessageToFriendThunk:Oe,getReturnMessageDateThunk:function(e,t){return function(){var a=Object(A.a)(D.a.mark((function a(n){var r;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,M.a.returnMessageThanDate(e,t);case 2:r=a.sent,n(be(r.data));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},syncMessagesWithFrinedThunk:Se}))(De),Fe=a(135),Me=a.n(Fe),Le=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).catchAllUnhandelErrors=function(e){n.setState({globalErrors:e.reason.message+"("+e.reason.request.response+")"}),setTimeout((function(){return n.setState({globalErrors:null})}),5e3)},n.state={globalErrors:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("unhandledrejection",this.catchAllUnhandelErrors)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.globalErrors?r.a.createElement("div",{className:Me.a.error_window},this.state.globalErrors):"")}}]),a}(r.a.Component),xe=r.a.lazy((function(){return a.e(3).then(a.bind(null,294))})),We=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.initiliazedThunk()}},{key:"componentDidUpdate",value:function(e){e.location.pathname!==this.props.location.pathname&&this.ClearIntreval()}},{key:"SyncInterval",value:function(e){var t=this;this.timerID=setInterval((function(){return t.props.syncMessagesWithFrinedThunk(e)}),5e3)}},{key:"ClearIntreval",value:function(){return clearInterval(this.timerID)}},{key:"render",value:function(){var e=this;return this.props.initialized?r.a.createElement("div",{className:"App"},r.a.createElement(Le,null),r.a.createElement(me,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement(m.b,{path:"/Users",render:function(){return r.a.createElement(n.Suspense,{fallback:r.a.createElement(p.a,null)},r.a.createElement(xe,null))}}),r.a.createElement(m.b,{exact:!0,path:"/profile/:userId?",render:function(){return r.a.createElement(X,null)}}),r.a.createElement(m.b,{path:"/Login",render:function(){return r.a.createElement(fe,null)}}),r.a.createElement(m.b,{path:"/Dialogs",render:function(){return e.props.id?r.a.createElement(we,null):r.a.createElement(m.a,{to:"/Login"})}}),r.a.createElement(ge,null)))),r.a.createElement("div",{className:"container-fluid fluidToMobile"},r.a.createElement(m.b,{path:"/messages/:userId?",render:function(){return e.props.id?r.a.createElement(Ae,{SyncInterval:e.SyncInterval.bind(e),ClearIntreval:e.ClearIntreval.bind(e)}):r.a.createElement(m.a,{to:"/Login"})}}))):r.a.createElement(p.a,null)}}]),a}(r.a.Component),Re=Object(V.d)(Object(P.b)((function(e){return{initialized:e.app.initialized,id:e.Auth.id}}),{initiliazedThunk:function(){return function(e){e(se()).then((function(){e({type:"INITIALIZED_SUCCESS"})}))}},syncMessagesWithFrinedThunk:Se}),m.f)(We);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ge=a(125),Be=a(136),He=a(128),ze=Object(V.c)({userPage:Ge.a,profilePage:z,Auth:le,form:He.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(F.a)({},e,{initialized:!0});case"INITIALIZED_USER_PHOTO":return Object(F.a)({},e,{userPhoto:Object(F.a)({},t.userPhoto)});default:return e}},dialogs:ke}),Ve=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.d,Je=Object(V.e)(ze,Ve(Object(V.a)(Be.a)));window.store=Je;var Xe=Je;a(290),a(291);o.a.render(r.a.createElement(Y.a,{basename:"/ReactLearning"},r.a.createElement(P.a,{store:Xe},r.a.createElement(Re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},30:function(e,t,a){e.exports={uploadPhoto:"Profile_uploadPhoto__cSgFt",infoProfile:"Profile_infoProfile__3r0mc",avatarBlock:"Profile_avatarBlock__9ZEi-",editButton:"Profile_editButton__3_Uta",saveButton:"Profile_saveButton__140UJ"}},32:function(e,t,a){e.exports={FormControl:"FormsControls_FormControl__2qXua",error:"FormsControls_error__1vYY8",someError:"FormsControls_someError__2WXnf"}},36:function(e,t,a){e.exports=a.p+"static/media/userPhoto.a8d8ecba.png"},39:function(e,t,a){e.exports={sidebar:"Sidebar_sidebar__1k2CN",active:"Sidebar_active__M0-Ej",loginButton:"Sidebar_loginButton__mtp_z"}},42:function(e,t,a){e.exports={loginButton:"Header_loginButton__22GjW",cursor:"Header_cursor__VdsFJ",userPhoto:"Header_userPhoto__3UOb7",userlink:"Header_userlink__34Tsc"}},89:function(e,t,a){e.exports={preloader:"preloader_preloader__v54Zr",preloadContain:"preloader_preloadContain__2re8h"}},9:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return c})),a.d(t,"a",(function(){return u}));var n=a(132),r=n.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"a6c20467-1a5b-406b-88d2-a8a4879b1b99"}}),s={getUsers:function(e,t){return r.get("users?count=".concat(e,"&page=").concat(t)).then((function(e){return e.data}))},getUsersTerm:function(e,t){return r.get("users?count=".concat(e,"&page=1&term=").concat(t)).then((function(e){return e.data}))}},o={getProfile:function(e){return r.get("profile/"+e)},getStatus:function(e){return r.get("/profile/status/"+e)},updateStatus:function(e){return r.put("/profile/status",{status:e})},updateProfile:function(e){return r.put("/profile",e)},uploadPhoto:function(e){var t=new FormData;return t.append("image",e),r.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})}},l={followUser:function(e){return r.post("follow/".concat(e),{})},unfollowUser:function(e){return r.delete("follow/".concat(e),{})}},i={me:function(){return r.get("auth/me")},login:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return r.post("auth/login",{email:e,password:t,rememberMe:a,captcha:n})},logout:function(){return r.delete("auth/login")}},c={getCaptcha:function(){return r.get("security/get-captcha-url")}},u={startChatting:function(e){return r.put("dialogs/".concat(e))},getAllDialogs:function(){return r.get("dialogs")},getListMessagesWithFriend:function(e){return r.get("dialogs/".concat(e,"/messages"))},sendMessageToFriend:function(e,t){return r.post("dialogs/".concat(e,"/messages"),{body:t})},isViewedYourMessage:function(e){return r.get("dialogs/messages/".concat(e,"/viewed"))},messageInSpam:function(e){return r.post("dialogs/messages/".concat(e,"/spam"))},deleteMessage:function(e){return r.delete("dialogs/messages/".concat(e))},restoreMessage:function(e){return r.put("dialogs/messages/".concat(e,"/restore"))},returnMessageThanDate:function(e,t){return r.get("dialogs/".concat(e,"/messages/new?newerThen=").concat(t))},listNewMessage:function(){return r.get("dialogs/messages/new/count")}}},95:function(e,t,a){}},[[163,1,2]]]);
//# sourceMappingURL=main.dde4336c.chunk.js.map